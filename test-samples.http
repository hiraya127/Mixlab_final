### MixLab System - API Test Samples
### Use with REST Client extension in VS Code or similar tools

@baseUrl = http://localhost:3000
@token = YOUR_JWT_TOKEN_HERE
@adminToken = ADMIN_JWT_TOKEN_HERE

### ============================================
### AUTHENTICATION TESTS
### ============================================

### 1. Send Registration OTP
POST {{baseUrl}}/api/auth/send-registration-otp
Content-Type: application/json

{
  "email": "testuser@example.com",
  "username": "testuser123"
}

### 2. Verify Registration OTP
POST {{baseUrl}}/api/auth/verify-registration-otp
Content-Type: application/json

{
  "email": "testuser@example.com",
  "otp": "123456",
  "username": "testuser123",
  "password": "Test@1234",
  "first_name": "Test",
  "last_name": "User",
  "birthday": "1990-01-15",
  "contact": "+1234567890",
  "home_address": "123 Test Street"
}

### 3. User Login
POST {{baseUrl}}/api/auth/login
Content-Type: application/json

{
  "username": "testuser123",
  "password": "Test@1234"
}

### 4. Get Current User
GET {{baseUrl}}/api/auth/me
Authorization: Bearer {{token}}

### 5. Forgot Password - Request OTP
POST {{baseUrl}}/api/auth/forgot-password
Content-Type: application/json

{
  "email": "testuser@example.com"
}

### 6. Verify Reset OTP
POST {{baseUrl}}/api/auth/verify-reset-otp
Content-Type: application/json

{
  "email": "testuser@example.com",
  "otp": "123456"
}

### 7. Reset Password
POST {{baseUrl}}/api/auth/reset-password
Content-Type: application/json

{
  "email": "testuser@example.com",
  "otp": "123456",
  "new_password": "NewTest@1234"
}

### 8. Google OAuth (Redirect)
GET {{baseUrl}}/api/auth/google

### ============================================
### BOOKING SYSTEM TESTS
### ============================================

### 9. Get User Booking Data (Auto-fill)
GET {{baseUrl}}/api/bookings/user-data
Authorization: Bearer {{token}}

### 10. Create Booking
POST {{baseUrl}}/api/bookings
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "name": "Test User",
  "email": "testuser@example.com",
  "contact": "+1234567890",
  "birthday": "1990-01-15",
  "home_address": "123 Test Street",
  "service_type": "rehearsal",
  "booking_date": "2024-12-25",
  "booking_time": "14:00",
  "hours": 2,
  "members": 1,
  "payment_method": "gcash"
}

### 11. Get Booking Details
GET {{baseUrl}}/api/bookings/MIX-ABC123-XYZ789
Authorization: Bearer {{token}}

### ============================================
### NOTIFICATION SYSTEM TESTS
### ============================================

### 12. Get Notifications (Admin)
GET {{baseUrl}}/api/admin/notifications?limit=50
Authorization: Bearer {{adminToken}}

### 13. Get Unread Count
GET {{baseUrl}}/api/admin/notifications/unread-count
Authorization: Bearer {{adminToken}}

### 14. Mark Notification as Read
PUT {{baseUrl}}/api/admin/notifications/1/read
Authorization: Bearer {{adminToken}}

### 15. Mark All as Read
PUT {{baseUrl}}/api/admin/notifications/read-all
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{}

### 16. Create Notification (Admin)
POST {{baseUrl}}/api/admin/notifications
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "type": "announcement",
  "message": "System maintenance scheduled",
  "link": "/frontend/views/admin/settings.html"
}

### ============================================
### LEARNING SYSTEM TESTS
### ============================================

### 17. Get All Instruments
GET {{baseUrl}}/api/lessons/instruments

### 18. Get Modules by Instrument
GET {{baseUrl}}/api/lessons/modules/1

### 19. Get Lessons by Module
GET {{baseUrl}}/api/lessons/module/1/lessons

### 20. Get Lesson Detail
GET {{baseUrl}}/api/lessons/lesson/1

### 21. Complete Lesson
POST {{baseUrl}}/api/lessons/complete
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "lessonId": 1
}

### 22. Get User Progress
GET {{baseUrl}}/api/lessons/progress
Authorization: Bearer {{token}}

### ============================================
### QUIZ/PLAY SYSTEM TESTS
### ============================================

### 23. Get Quizzes by Instrument and Level
GET {{baseUrl}}/api/quiz/quizzes/1/1

### 24. Get Quiz Details
GET {{baseUrl}}/api/quiz/1

### 25. Submit Quiz
POST {{baseUrl}}/api/quiz/submit
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "quiz_id": 1,
  "answers": [0, 1, 0, 1, 0],
  "time_taken": 180
}

### 26. Get Quiz Statistics
GET {{baseUrl}}/api/quiz/stats
Authorization: Bearer {{token}}

### ============================================
### ADMIN PANEL TESTS
### ============================================

### 27. Admin Dashboard Metrics
GET {{baseUrl}}/api/admin/dashboard
Authorization: Bearer {{adminToken}}

### 28. Get All Users (Admin)
GET {{baseUrl}}/api/admin/users?page=1&limit=10&status=active
Authorization: Bearer {{adminToken}}

### 29. Create User (Admin)
POST {{baseUrl}}/api/admin/users
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "username": "newuser",
  "first_name": "New",
  "last_name": "User",
  "email": "newuser@example.com",
  "password": "Secure@1234",
  "role": "student",
  "birthday": "1995-05-20",
  "contact": "+1234567890"
}

### 30. Update User (Admin)
PUT {{baseUrl}}/api/admin/users/1
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "first_name": "Updated",
  "role": "instructor",
  "is_verified": 1
}

### 31. Delete User (Admin)
DELETE {{baseUrl}}/api/admin/users/1
Authorization: Bearer {{adminToken}}

### 32. Get Appointments (Admin)
GET {{baseUrl}}/api/admin/appointments?date=2024-12-25&status=confirmed
Authorization: Bearer {{adminToken}}

### 33. Create Appointment (Admin)
POST {{baseUrl}}/api/admin/appointments
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "student_id": 1,
  "instructor_id": 5,
  "date": "2024-12-26",
  "time": "15:00",
  "service_type": "lesson",
  "notes": "First lesson"
}

### 34. Get Modules (Admin)
GET {{baseUrl}}/api/admin/modules?instrument_id=1&status=active
Authorization: Bearer {{adminToken}}

### 35. Create Module (Admin)
POST {{baseUrl}}/api/admin/modules
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "instrument_id": 1,
  "name": "Advanced Piano Techniques",
  "description": "Learn advanced piano techniques",
  "level": 3,
  "status": "active",
  "service_type": "lesson",
  "level_requirement": 2
}

### 36. Create Lesson (Admin)
POST {{baseUrl}}/api/admin/lessons
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "module_id": 1,
  "title": "Piano Scales and Arpeggios",
  "content": "Learn major and minor scales...",
  "images": ["/images/piano-scales.jpg"],
  "youtube_video_id": "dQw4w9WgXcQ",
  "points": 15,
  "status": "active"
}

### 37. Create Quiz (Admin)
POST {{baseUrl}}/api/admin/quizzes
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "instrument_id": 1,
  "level": 2,
  "title": "Intermediate Piano Quiz",
  "description": "Test your intermediate piano knowledge",
  "questions": [
    {
      "question": "What is a chord progression?",
      "options": ["Sequence of chords", "Single note", "Rhythm pattern", "Time signature"],
      "correctAnswer": 0
    }
  ],
  "time_limit": 300,
  "points_per_question": 10,
  "status": "active"
}

### 38. Get Analytics (Admin)
GET {{baseUrl}}/api/admin/analytics?start_date=2024-12-01&end_date=2024-12-31
Authorization: Bearer {{adminToken}}

### 39. Get Activity Logs (Admin)
GET {{baseUrl}}/api/admin/activity-logs?type=user_created&page=1&limit=20
Authorization: Bearer {{adminToken}}

### 40. Get Available Time Slots
GET {{baseUrl}}/api/admin/appointments/slots?date=2024-12-25&instructor_id=5
Authorization: Bearer {{adminToken}}

